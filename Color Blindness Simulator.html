<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Color Blindness Simulator | Web Accessibility Tools</title>
    <meta name="description" content="Simulate how images appear to people with different types of color blindness. Test your designs for accessibility.">
    <style>
        :root {
            --primary: #4361ee;
            --secondary: #3a0ca3;
            --success: #4cc9f0;
            --warning: #f72585;
            --light: #f8f9fa;
            --dark: #212529;
            --gray: #6c757d;
            --border-radius: 12px;
            --box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
            --transition: all 0.3s ease;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background-color: #f5f7ff;
            color: var(--dark);
            line-height: 1.6;
            padding: 20px;
            min-height: 100vh;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
        }

        header {
            text-align: center;
            margin-bottom: 30px;
            padding: 20px;
        }

        header h1 {
            font-size: 2.5rem;
            color: var(--secondary);
            margin-bottom: 10px;
        }

        header p {
            color: var(--gray);
            font-size: 1.1rem;
            max-width: 700px;
            margin: 0 auto;
        }

        .card {
            background: white;
            border-radius: var(--border-radius);
            box-shadow: var(--box-shadow);
            padding: 25px;
            margin-bottom: 25px;
            transition: var(--transition);
        }

        .card:hover {
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.15);
        }

        .card-title {
            font-size: 1.5rem;
            color: var(--secondary);
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .card-title i {
            font-size: 1.8rem;
        }

        .upload-area {
            border: 2px dashed #dee2e6;
            border-radius: var(--border-radius);
            padding: 40px 20px;
            text-align: center;
            margin-bottom: 25px;
            cursor: pointer;
            transition: var(--transition);
        }

        .upload-area:hover {
            border-color: var(--primary);
            background-color: rgba(67, 97, 238, 0.05);
        }

        .upload-area i {
            font-size: 3rem;
            color: var(--gray);
            margin-bottom: 15px;
        }

        .upload-area p {
            color: var(--gray);
            margin-bottom: 15px;
        }

        .upload-area.has-image {
            padding: 20px;
            border-style: solid;
        }

        .upload-area.has-image .upload-prompt {
            display: none;
        }

        #image-preview {
            max-width: 100%;
            max-height: 300px;
            display: none;
            margin: 0 auto;
            border-radius: 8px;
        }

        .simulation-options {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 25px;
        }

        .option-group {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .option-group label {
            font-weight: 600;
            color: var(--dark);
        }

        select {
            padding: 12px 15px;
            border: 1px solid #ddd;
            border-radius: 8px;
            font-size: 1rem;
            transition: var(--transition);
            background-color: white;
        }

        select:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(67, 97, 238, 0.2);
        }

        button {
            padding: 12px 20px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            transition: var(--transition);
        }

        .btn-primary {
            background-color: var(--primary);
            color: white;
        }

        .btn-primary:hover {
            background-color: var(--secondary);
        }

        .btn-secondary {
            background-color: #e9ecef;
            color: var(--dark);
        }

        .btn-secondary:hover {
            background-color: #dee2e6;
        }

        .btn-warning {
            background-color: var(--warning);
            color: white;
        }

        .btn-warning:hover {
            background-color: #c51a6c;
        }

        .actions {
            display: flex;
            gap: 15px;
            justify-content: center;
            margin-top: 30px;
            flex-wrap: wrap;
        }

        .results {
            display: grid;
            grid-template-columns: 1fr;
            gap: 30px;
        }

        @media (min-width: 768px) {
            .results {
                grid-template-columns: 1fr 1fr;
            }
        }

        .result-card {
            text-align: center;
        }

        .result-title {
            font-size: 1.2rem;
            margin-bottom: 15px;
            color: var(--secondary);
        }

        .result-image {
            width: 100%;
            border-radius: 8px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            margin-bottom: 10px;
            display: none;
        }

        .color-blindness-info {
            margin-top: 30px;
            padding: 20px;
            background-color: #f8f9fa;
            border-radius: var(--border-radius);
        }

        .info-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .info-item {
            padding: 15px;
            background: white;
            border-radius: 8px;
            box-shadow: 0 3px 10px rgba(0, 0, 0, 0.05);
        }

        .info-item h3 {
            color: var(--secondary);
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .ad-container {
            margin: 25px 0;
            text-align: center;
            background: #f8f9fa;
            padding: 20px;
            border-radius: var(--border-radius);
        }

        .ad-label {
            display: block;
            text-align: center;
            color: var(--gray);
            font-size: 0.8rem;
            margin-bottom: 10px;
        }

        .ad-placeholder {
            width: 100%;
            padding: 30px;
            background: #e9ecef;
            border-radius: 8px;
            color: var(--gray);
            margin: 0 auto;
        }

        .nav {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-bottom: 30px;
        }

        .nav a {
            color: var(--primary);
            text-decoration: none;
            font-weight: 600;
            padding: 10px 20px;
            border-radius: 30px;
            transition: var(--transition);
        }

        .nav a:hover {
            background-color: rgba(67, 97, 238, 0.1);
        }

        footer {
            text-align: center;
            margin-top: 50px;
            padding: 20px;
            color: var(--gray);
            font-size: 0.9rem;
        }

        .loading {
            display: none;
            text-align: center;
            padding: 20px;
        }

        .spinner {
            border: 4px solid rgba(0, 0, 0, 0.1);
            border-left-color: var(--primary);
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
            margin: 0 auto 15px;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>Color Blindness Simulator</h1>
            <p>Upload an image to see how it appears to people with different types of color vision deficiencies</p>
        </header>

        <div class="nav">
            <a href="#privacy">Privacy Policy</a>
            <a href="#contact">Contact</a>
        </div>

        <div class="ad-container">
            <span class="ad-label">Advertisement</span>
            <div class="ad-placeholder">Google AdSense Banner</div>
        </div>

        <div class="card">
            <h2 class="card-title">
                <i>üñºÔ∏è</i> Upload Image
            </h2>
            <div class="upload-area" id="upload-area">
                <div class="upload-prompt">
                    <i>üìÅ</i>
                    <p>Drag & drop your image here or click to browse</p>
                    <button class="btn-secondary" id="select-image-btn">Select Image</button>
                </div>
                <img id="image-preview" alt="Image preview">
            </div>
            <input type="file" id="file-input" accept="image/*" style="display: none;">
            
            <div class="simulation-options">
                <div class="option-group">
                    <label for="color-blindness-type">Color Blindness Type</label>
                    <select id="color-blindness-type">
                        <option value="protanopia">Protanopia (Red-Blind)</option>
                        <option value="protanomaly">Protanomaly (Red-Weak)</option>
                        <option value="deuteranopia">Deuteranopia (Green-Blind)</option>
                        <option value="deuteranomaly">Deuteranomaly (Green-Weak)</option>
                        <option value="tritanopia">Tritanopia (Blue-Blind)</option>
                        <option value="tritanomaly">Tritanomaly (Blue-Weak)</option>
                        <option value="achromatopsia">Achromatopsia (Complete Color Blindness)</option>
                        <option value="achromatomaly">Achromatomaly (Partial Color Blindness)</option>
                    </select>
                </div>
                
                <div class="option-group">
                    <label for="intensity">Simulation Intensity</label>
                    <select id="intensity">
                        <option value="0.5">Low</option>
                        <option value="0.75" selected>Medium</option>
                        <option value="1">High</option>
                        <option value="1.25">Very High</option>
                    </select>
                </div>
            </div>
            
            <div class="actions">
                <button class="btn-primary" id="simulate-btn">Simulate</button>
                <button class="btn-secondary" id="reset-btn">Reset</button>
                <button class="btn-warning" id="download-btn">Download Result</button>
            </div>
            
            <div class="loading" id="loading">
                <div class="spinner"></div>
                <p>Processing image...</p>
            </div>
        </div>

        <div class="card">
            <h2 class="card-title">
                <i>üîç</i> Simulation Results
            </h2>
            <div class="results">
                <div class="result-card">
                    <h3 class="result-title">Original Image</h3>
                    <canvas id="original-canvas" class="result-image"></canvas>
                    <p>How people with normal color vision see the image</p>
                </div>
                
                <div class="result-card">
                    <h3 class="result-title">Simulated Image</h3>
                    <canvas id="simulated-canvas" class="result-image"></canvas>
                    <p id="simulation-description">How people with selected color vision deficiency see the image</p>
                </div>
            </div>
        </div>

        <div class="card color-blindness-info">
            <h2 class="card-title">
                <i>‚ÑπÔ∏è</i> About Color Blindness
            </h2>
            <p>Color blindness affects approximately 1 in 12 men and 1 in 200 women worldwide. Understanding how your designs appear to people with color vision deficiencies is crucial for accessibility.</p>
            
            <div class="info-grid">
                <div class="info-item">
                    <h3><i>üî¥</i> Protanopia</h3>
                    <p>Red-green color blindness where red appears black or dark gray. Affects about 1% of males.</p>
                </div>
                
                <div class="info-item">
                    <h3><i>üü¢</i> Deuteranopia</h3>
                    <p>Red-green color blindness where greens appear beige and reds appear brown. The most common type.</p>
                </div>
                
                <div class="info-item">
                    <h3><i>üîµ</i> Tritanopia</h3>
                    <p>Blue-yellow color blindness where blues appear greener and difficulty distinguishing pink from yellow.</p>
                </div>
                
                <div class="info-item">
                    <h3><i>‚ö´</i> Achromatopsia</h3>
                    <p>Complete color blindness where people see only shades of gray. Very rare, affecting about 1 in 30,000 people.</p>
                </div>
            </div>
        </div>

        <div class="ad-container">
            <span class="ad-label">Advertisement</span>
            <div class="ad-placeholder">Google AdSense Rectangle</div>
        </div>

        <div class="card" id="privacy">
            <h2 class="card-title">
                <i>üîí</i> Privacy Policy
            </h2>
            <p>Your privacy is important to us. This tool processes images entirely in your browser - no image data is sent to our servers. We don't store any personal data through this tool.</p>
            <p>We use Google AdSense to display advertisements. Google may use cookies to serve ads based on your prior visits to our website or other websites. You can opt out of personalized advertising by visiting <a href="https://adssettings.google.com" target="_blank">Google's Ads Settings</a>.</p>
        </div>

        <div class="card" id="contact">
            <h2 class="card-title">
                <i>üìß</i> Contact Us
            </h2>
            <p>If you have any questions about this tool or our website, please contact us at <a href="mailto:contact@multitools.example">contact@multitools.example</a>.</p>
            <p>We welcome your feedback and suggestions for improving our tools and services.</p>
        </div>

        <footer>
            <p>¬© 2023 Web Multi-Tools. All rights reserved.</p>
            <p>This tool is designed to help improve web accessibility but should be used as part of a comprehensive accessibility testing strategy.</p>
        </footer>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // DOM Elements
            const uploadArea = document.getElementById('upload-area');
            const fileInput = document.getElementById('file-input');
            const selectImageBtn = document.getElementById('select-image-btn');
            const imagePreview = document.getElementById('image-preview');
            const simulateBtn = document.getElementById('simulate-btn');
            const resetBtn = document.getElementById('reset-btn');
            const downloadBtn = document.getElementById('download-btn');
            const originalCanvas = document.getElementById('original-canvas');
            const simulatedCanvas = document.getElementById('simulated-canvas');
            const loadingIndicator = document.getElementById('loading');
            const simulationDescription = document.getElementById('simulation-description');
            const blindnessTypeSelect = document.getElementById('color-blindness-type');
            const intensitySelect = document.getElementById('intensity');
            
            // Canvas context
            const originalCtx = originalCanvas.getContext('2d');
            const simulatedCtx = simulatedCanvas.getContext('2d');
            
            // Current image
            let currentImage = null;
            
            // Set up event listeners
            uploadArea.addEventListener('click', function(e) {
                // Prevent the button from triggering the upload area click
                if (e.target !== selectImageBtn) {
                    fileInput.click();
                }
            });
            
            selectImageBtn.addEventListener('click', function(e) {
                e.stopPropagation(); // Prevent triggering the upload area click
                fileInput.click();
            });
            
            fileInput.addEventListener('change', handleImageUpload);
            simulateBtn.addEventListener('click', simulateColorBlindness);
            resetBtn.addEventListener('click', resetTool);
            downloadBtn.addEventListener('click', downloadResult);
            
            // Enable drag and drop
            uploadArea.addEventListener('dragover', function(e) {
                e.preventDefault();
                uploadArea.style.borderColor = 'var(--primary)';
                uploadArea.style.backgroundColor = 'rgba(67, 97, 238, 0.1)';
            });
            
            uploadArea.addEventListener('dragleave', function() {
                uploadArea.style.borderColor = '#dee2e6';
                uploadArea.style.backgroundColor = 'transparent';
            });
            
            uploadArea.addEventListener('drop', function(e) {
                e.preventDefault();
                uploadArea.style.borderColor = '#dee2e6';
                uploadArea.style.backgroundColor = 'transparent';
                
                if (e.dataTransfer.files.length) {
                    fileInput.files = e.dataTransfer.files;
                    handleImageUpload({target: {files: e.dataTransfer.files}});
                }
            });
            
            // Handle image upload
            function handleImageUpload(e) {
                const files = e?.target?.files || fileInput.files;
                if (!files || !files[0]) return;
                
                const file = files[0];
                
                // Check if file is an image
                if (!file.type.match('image.*')) {
                    alert('Please select an image file');
                    return;
                }
                
                const reader = new FileReader();
                
                reader.onload = function(e) {
                    currentImage = new Image();
                    currentImage.onload = function() {
                        // Display preview
                        imagePreview.src = e.target.result;
                        imagePreview.style.display = 'block';
                        uploadArea.classList.add('has-image');
                        
                        // Draw on original canvas
                        originalCanvas.width = currentImage.width;
                        originalCanvas.height = currentImage.height;
                        originalCtx.drawImage(currentImage, 0, 0);
                        originalCanvas.style.display = 'block';
                        
                        // Reset simulated canvas
                        simulatedCanvas.width = currentImage.width;
                        simulatedCanvas.height = currentImage.height;
                        simulatedCanvas.style.display = 'block';
                    };
                    currentImage.src = e.target.result;
                };
                
                reader.readAsDataURL(file);
            }
            
            // Simulate color blindness
            function simulateColorBlindness() {
                if (!currentImage) {
                    alert('Please upload an image first');
                    return;
                }
                
                // Show loading indicator
                loadingIndicator.style.display = 'block';
                
                // Use setTimeout to allow the UI to update before processing
                setTimeout(() => {
                    const type = blindnessTypeSelect.value;
                    const intensity = parseFloat(intensitySelect.value);
                    
                    // Draw original image on simulated canvas
                    simulatedCtx.drawImage(currentImage, 0, 0);
                    
                    // Get image data
                    const imageData = simulatedCtx.getImageData(0, 0, simulatedCanvas.width, simulatedCanvas.height);
                    const data = imageData.data;
                    
                    // Apply color transformation based on selected type
                    for (let i = 0; i < data.length; i += 4) {
                        const r = data[i];
                        const g = data[i + 1];
                        const b = data[i + 2];
                        
                        let newR, newG, newB;
                        
                        switch (type) {
                            case 'protanopia':
                                // Simulate red-blind
                                newR = 0.567 * r + 0.433 * g + 0 * b;
                                newG = 0.558 * r + 0.442 * g + 0 * b;
                                newB = 0 * r + 0.242 * g + 0.758 * b;
                                break;
                            case 'protanomaly':
                                // Simulate red-weak
                                newR = 0.817 * r + 0.183 * g + 0 * b;
                                newG = 0.333 * r + 0.667 * g + 0 * b;
                                newB = 0 * r + 0.125 * g + 0.875 * b;
                                break;
                            case 'deuteranopia':
                                // Simulate green-blind
                                newR = 0.625 * r + 0.375 * g + 0 * b;
                                newG = 0.7 * r + 0.3 * g + 0 * b;
                                newB = 0 * r + 0.3 * g + 0.7 * b;
                                break;
                            case 'deuteranomaly':
                                // Simulate green-weak
                                newR = 0.8 * r + 0.2 * g + 0 * b;
                                newG = 0.258 * r + 0.742 * g + 0 * b;
                                newB = 0 * r + 0.142 * g + 0.858 * b;
                                break;
                            case 'tritanopia':
                                // Simulate blue-blind
                                newR = 0.95 * r + 0.05 * g + 0 * b;
                                newG = 0 * r + 0.433 * g + 0.567 * b;
                                newB = 0 * r + 0.475 * g + 0.525 * b;
                                break;
                            case 'tritanomaly':
                                // Simulate blue-weak
                                newR = 0.967 * r + 0.033 * g + 0 * b;
                                newG = 0 * r + 0.733 * g + 0.267 * b;
                                newB = 0 * r + 0.183 * g + 0.817 * b;
                                break;
                            case 'achromatopsia':
                                // Simulate complete color blindness (grayscale)
                                const avg = 0.299 * r + 0.587 * g + 0.114 * b;
                                newR = newG = newB = avg;
                                break;
                            case 'achromatomaly':
                                // Simulate partial color blindness (desaturated)
                                const avg2 = 0.299 * r + 0.587 * g + 0.114 * b;
                                newR = (r + avg2) / 2;
                                newG = (g + avg2) / 2;
                                newB = (b + avg2) / 2;
                                break;
                            default:
                                newR = r;
                                newG = g;
                                newB = b;
                        }
                        
                        // Apply intensity
                        data[i] = intensity * newR + (1 - intensity) * r;
                        data[i + 1] = intensity * newG + (1 - intensity) * g;
                        data[i + 2] = intensity * newB + (1 - intensity) * b;
                    }
                    
                    // Put modified image data back to canvas
                    simulatedCtx.putImageData(imageData, 0, 0);
                    
                    // Update simulation description
                    simulationDescription.textContent = `How people with ${blindnessTypeSelect.options[blindnessTypeSelect.selectedIndex].text} see the image`;
                    
                    // Hide loading indicator
                    loadingIndicator.style.display = 'none';
                }, 100);
            }
            
            // Reset tool
            function resetTool() {
                fileInput.value = '';
                imagePreview.src = '';
                imagePreview.style.display = 'none';
                uploadArea.classList.remove('has-image');
                originalCtx.clearRect(0, 0, originalCanvas.width, originalCanvas.height);
                simulatedCtx.clearRect(0, 0, simulatedCanvas.width, simulatedCanvas.height);
                originalCanvas.style.display = 'none';
                simulatedCanvas.style.display = 'none';
                currentImage = null;
                
                // Reset selects to default
                blindnessTypeSelect.selectedIndex = 0;
                intensitySelect.selectedIndex = 1;
            }
            
            // Download result
            function downloadResult() {
                if (!currentImage) {
                    alert('Please upload and process an image first');
                    return;
                }
                
                const link = document.createElement('a');
                link.download = `color-blindness-simulation-${blindnessTypeSelect.value}.png`;
                link.href = simulatedCanvas.toDataURL('image/png');
                link.click();
            }
        });
    </script>
</body>
</html>
